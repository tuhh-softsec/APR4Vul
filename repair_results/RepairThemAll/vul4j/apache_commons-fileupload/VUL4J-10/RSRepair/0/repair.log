cd /workdir/RSRepair_vul4j_apache_commons-fileupload_VUL4J-10;
export JAVA_TOOL_OPTIONS="-Dfile.encoding=UTF8 -Duser.language=en-US -Duser.country=US -Duser.language=en";
TZ="America/New_York"; export TZ;
export PATH="/usr/lib/jvm/java-8-openjdk-amd64/bin:$PATH";
export JAVA_HOME="/usr/lib/jvm/java-8-openjdk-amd64";
timeout 240m java -Xmx4g -Xms1g -XX:MaxPermSize=512m -cp /script/../libs/jmetal.jar:/script/../repair_tools/arja.jar us.msu.cse.repair.Main \
	RSRepair \
	-DexternalProjRoot /script/../libs/arja_external \
	-DprojectDir /workdir/RSRepair_vul4j_apache_commons-fileupload_VUL4J-10 \
    -DtestFiltered false \
    -DrunTestCommand "mvn test -Dhttps.protocols=TLSv1.2 -Denforcer.skip=true -Dcheckstyle.skip=true -Dcobertura.skip=true -DskipITs=true -Drat.skip=true -Dlicense.skip=true -Dpmd.skip=true -Dfindbugs.skip=true -Dgpg.skip=true -Dskip.npm=true -Dskip.gulp=true -Dskip.bower=true -Danimal.sniffer.skip=true -V -B" \
	-DsrcJavaDir /workdir/RSRepair_vul4j_apache_commons-fileupload_VUL4J-10/src/main/java \
	-DbinJavaDir /workdir/RSRepair_vul4j_apache_commons-fileupload_VUL4J-10/target/classes \
	-DbinTestDir /workdir/RSRepair_vul4j_apache_commons-fileupload_VUL4J-10/target/test-classes \
	-DdiffFormat true \
	-Dseed 0 \
	-DgzoltarDataDir /script/../data/benchmarks/vul4j/perfectfl/VUL4J-10 \
	-Ddependences /root/.m2/repository/javax/servlet/servlet-api/2.4/servlet-api-2.4.jar:/root/.m2/repository/commons-io/commons-io/2.2/commons-io-2.2.jar:/root/.m2/repository/portlet-api/portlet-api/1.0/portlet-api-1.0.jar:/root/.m2/repository/junit/junit/4.11/junit-4.11.jar:/root/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar;
	echo "\n\nNode: `hostname`\n";
	echo "\n\nDate: `date`\n";
Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8 -Duser.language=en-US -Duser.country=US -Duser.language=en
OpenJDK 64-Bit Server VM warning: ignoring option MaxPermSize=512m; support was removed in 8.0
Fault localization starts...
Number of positive tests: 67
Number of negative tests: 2
Negative tests: [org.apache.commons.fileupload.DiskFileItemSerializeTest#testInvalidRepository, org.apache.commons.fileupload.DiskFileItemSerializeTest#testInvalidRepositoryWithNullChar]
Faulty Lines: 
org.apache.commons.fileupload.disk.DiskFileItem#657:1.0
org.apache.commons.fileupload.disk.DiskFileItem#659:1.0
org.apache.commons.fileupload.disk.DiskFileItem#587:1.0
Fault localization is finished!
AST parsing starts...
AST parsing is finished!
Detection of local variables starts...
Detection of local variables is finished!
Detection of fields starts...
Detection of fields is finished!
Detection of methods starts...
Detection of methods is finished!
Ingredient screener starts...
Ingredient screener is finished!
Initialization of manipulations starts...
Initialization of manipulations is finished!
Filtering of the tests starts...
Number of positive tests considered: 67
Filtering of the tests is finished!
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,15 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (tempFile == null) {
+			File tempDir = repository;
+			if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
+			String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
+			tempFile = new File(tempDir, tempFileName);
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
@@ -653,7 +651,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.fieldName = fieldName;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = null;
}
return tempFile;
}
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            ParameterParser parser = new ParameterParser();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        dfosFile = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = dfos.getData();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return repository;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
}
return tempFile;
}
@@ -653,7 +655,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.fieldName = fieldName;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (cachedContent == null) {
+				cachedContent = dfos.getData();
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        this.isFormField = isFormField;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        dfosFile = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.fieldName = fieldName;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,10 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,10 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
}
return tempFile;
}
@@ -653,9 +655,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,13 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (dfos.isInMemory()) {
+			cachedContent = get();
+		} else {
+			cachedContent = null;
+			dfosFile = dfos.getFile();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        ParameterParser parser = new ParameterParser();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        ParameterParser parser = new ParameterParser();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        byte[] rawdata = get();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        in.defaultReadObject();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 4
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = get();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File tempDir = repository;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        InputStream fis = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        InputStream fis = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            ParameterParser parser = new ParameterParser();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+						isFormField, fileName, sizeThreshold, repository);
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (cachedContent == null) {
+					cachedContent = dfos.getData();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            tempDir = new File(System.getProperty("java.io.tmpdir"));
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,12 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (dfos == null) {
+					File outputFile = getTempFile();
+					dfos = new DeferredFileOutputStream(sizeThreshold,
+							outputFile);
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        final int limit = 100000000;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        byte[] fileData = new byte[(int) getSize()];
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = dfos.getData();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getStoreLocation();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            tempDir = new File(System.getProperty("java.io.tmpdir"));
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = dfos.getData();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            InputStream fis = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = getTempFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getTempFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,12 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.isFormField = isFormField;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            DiskFileItem result = new DiskFileItem(fieldName, contentType,
+					isFormField, fileName, sizeThreshold, repository);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = dfos.getData();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return repository;
}
return tempFile;
}
@@ -653,7 +653,13 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (dfos.isInMemory()) {
+					cachedContent = get();
+				} else {
+					cachedContent = null;
+					dfosFile = dfos.getFile();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,13 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = dfos.getData();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.isFormField = isFormField;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -585,6 +585,7 @@ public class DiskFileItem
String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

tempFile = new File(tempDir, tempFileName);
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File tempDir = repository;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        String charset = getCharSet();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,11 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (dfos == null) {
+			File outputFile = getTempFile();
+			dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = dfos.getData();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.isFormField = isFormField;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        dfosFile = dfos.getFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        final int limit = 100000000;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,11 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				File outputFile = getTempFile();
+				dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File outputFile = getStoreLocation();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        int current = COUNTER.getAndIncrement();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile.delete();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getTempFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+				isFormField, fileName, sizeThreshold, repository);

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            InputStream fis = null;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        String charset = getCharSet();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        ParameterParser parser = new ParameterParser();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            DiskFileItem result = new DiskFileItem(fieldName, contentType,
+					isFormField, fileName, sizeThreshold, repository);
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        this.fieldName = fieldName;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,10 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        InputStream fis = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (cachedContent == null) {
+				cachedContent = dfos.getData();
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = null;
}
return tempFile;
}
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        cachedContent = dfos.getData();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        int current = COUNTER.getAndIncrement();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File tempDir = repository;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,13 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (dfos.isInMemory()) {
+			cachedContent = get();
+		} else {
+			cachedContent = null;
+			dfosFile = dfos.getFile();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        String charset = getCharSet();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        InputStream fis = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        byte[] rawdata = get();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return repository;
}
return tempFile;
}
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        String charset = getCharSet();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        byte[] fileData = new byte[(int) getSize()];
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.fieldName = fieldName;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (cachedContent == null) {
+				cachedContent = dfos.getData();
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        int current = COUNTER.getAndIncrement();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = null;
}
return tempFile;
}
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,12 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
java.io.IOException: Stream closed
	at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:170)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:336)
	at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)
	at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)
	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)
	at java.io.InputStreamReader.read(InputStreamReader.java:184)
	at java.io.BufferedReader.fill(BufferedReader.java:161)
	at java.io.BufferedReader.readLine(BufferedReader.java:324)
	at java.io.BufferedReader.readLine(BufferedReader.java:389)
	at us.msu.cse.repair.core.util.StreamReaderThread.run(StreamReaderThread.java:36)
java.lang.IllegalStateException: Exception Occurred
	at us.msu.cse.repair.core.testexecutors.RExternalTestExecutor.runShell(RExternalTestExecutor.java:108)
	at us.msu.cse.repair.core.testexecutors.RExternalTestExecutor.runTests(RExternalTestExecutor.java:53)
	at us.msu.cse.repair.ec.problems.GenProgProblem.invokeTestExecutor(GenProgProblem.java:144)
	at us.msu.cse.repair.ec.problems.GenProgProblem.evaluate(GenProgProblem.java:99)
	at us.msu.cse.repair.ec.algorithms.RSRepairRandomSearch.execute(RSRepairRandomSearch.java:34)
	at us.msu.cse.repair.core.AbstractRepairAlgorithm.execute(AbstractRepairAlgorithm.java:18)
	at us.msu.cse.repair.RSRepairMain.main(RSRepairMain.java:44)
	at us.msu.cse.repair.Main.main(Main.java:12)
java.lang.NullPointerException
	at us.msu.cse.repair.core.testexecutors.RExternalTestExecutor.runTests(RExternalTestExecutor.java:85)
	at us.msu.cse.repair.ec.problems.GenProgProblem.invokeTestExecutor(GenProgProblem.java:144)
	at us.msu.cse.repair.ec.problems.GenProgProblem.evaluate(GenProgProblem.java:99)
	at us.msu.cse.repair.ec.algorithms.RSRepairRandomSearch.execute(RSRepairRandomSearch.java:34)
	at us.msu.cse.repair.core.AbstractRepairAlgorithm.execute(AbstractRepairAlgorithm.java:18)
	at us.msu.cse.repair.RSRepairMain.main(RSRepairMain.java:44)
	at us.msu.cse.repair.Main.main(Main.java:12)
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,12 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				return null;
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = dfos.getData();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        ParameterParser parser = new ParameterParser();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        this.fieldName = fieldName;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,13 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (dfos.isInMemory()) {
+					cachedContent = get();
+				} else {
+					cachedContent = null;
+					dfosFile = dfos.getFile();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File outputFile = dfos.getFile();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile.delete();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = getStoreLocation();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,11 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				File outputFile = getTempFile();
+				dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.fieldName = fieldName;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,13 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (dfos.isInMemory()) {
+					cachedContent = get();
+				} else {
+					cachedContent = null;
+					dfosFile = dfos.getFile();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        in.defaultReadObject();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 4
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        String charset = getCharSet();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,12 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (dfos == null) {
+					File outputFile = getTempFile();
+					dfos = new DeferredFileOutputStream(sizeThreshold,
+							outputFile);
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.fieldName = fieldName;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File tempDir = repository;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (cachedContent == null) {
+					cachedContent = dfos.getData();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            String charset = getCharSet();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = null;
}
return tempFile;
}
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,13 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (dfos.isInMemory()) {
+			cachedContent = get();
+		} else {
+			cachedContent = null;
+			dfosFile = dfos.getFile();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File tempDir = repository;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -585,6 +585,7 @@ public class DiskFileItem
String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

tempFile = new File(tempDir, tempFileName);
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,12 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,9 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+				isFormField, fileName, sizeThreshold, repository);
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File outputFile = getStoreLocation();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            DiskFileItem result = new DiskFileItem(fieldName, contentType,
+					isFormField, fileName, sizeThreshold, repository);
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        InputStream fis = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getTempFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return repository;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        byte[] fileData = new byte[(int) getSize()];
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        InputStream fis = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        final int limit = 100000000;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return repository;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        InputStream fis = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        final int limit = 100000000;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File tempDir = repository;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,12 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (dfos == null) {
+					File outputFile = getTempFile();
+					dfos = new DeferredFileOutputStream(sizeThreshold,
+							outputFile);
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (cachedContent == null) {
+					cachedContent = dfos.getData();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (cachedContent == null) {
+				cachedContent = dfos.getData();
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getTempFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,14 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (tempFile == null) {
+			File tempDir = repository;
+			if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
+			String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
+			tempFile = new File(tempDir, tempFileName);
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (cachedContent == null) {
+					cachedContent = dfos.getData();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        dfosFile = dfos.getFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.isFormField = isFormField;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File outputFile = getStoreLocation();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        dfosFile.delete();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,10 +653,12 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile.delete();
+		// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        ParameterParser parser = new ParameterParser();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        in.defaultReadObject();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 4
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        byte[] fileData = new byte[(int) getSize()];

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        String charset = getCharSet();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
@@ -653,9 +651,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,12 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        int current = COUNTER.getAndIncrement();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (dfos == null) {
+			File outputFile = getTempFile();
+			dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = get();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        String charset = getCharSet();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.fieldName = fieldName;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        int current = COUNTER.getAndIncrement();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            String charset = getCharSet();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (cachedContent == null) {
+				cachedContent = dfos.getData();
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (dfos == null) {
+			File outputFile = getTempFile();
+			dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            ParameterParser parser = new ParameterParser();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File tempDir = repository;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
}
return tempFile;
}
@@ -656,7 +656,10 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.fieldName = fieldName;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = getTempFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
@@ -656,7 +654,11 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (dfos == null) {
+			File outputFile = getTempFile();
+			dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.isFormField = isFormField;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
@@ -653,7 +654,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        ParameterParser parser = new ParameterParser();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+				isFormField, fileName, sizeThreshold, repository);

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        int current = COUNTER.getAndIncrement();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				File outputFile = getTempFile();
+				dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        this.isFormField = isFormField;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,11 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (dfos == null) {
+			File outputFile = getTempFile();
+			dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        this.isFormField = isFormField;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return tempFile;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        String tempFileName = format("upload_%s_%s.tmp", UID,
+						getUniqueId());
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return repository;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (cachedContent == null) {
+					cachedContent = dfos.getData();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,13 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,10 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        InputStream fis = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile.delete();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        in.defaultReadObject();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 4
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            InputStream fis = null;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        int current = COUNTER.getAndIncrement();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        cachedContent = get();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile = dfos.getFile();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getTempFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,13 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (dfos.isInMemory()) {
+			cachedContent = get();
+		} else {
+			cachedContent = null;
+			dfosFile = dfos.getFile();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        byte[] rawdata = get();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        cachedContent = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            ParameterParser parser = new ParameterParser();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile.delete();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = getStoreLocation();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (dfos == null) {
+			File outputFile = getTempFile();
+			dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        in.defaultReadObject();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 4
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        final int limit = 100000000;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getTempFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        cachedContent = get();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = get();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = dfos.getData();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,12 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (dfos == null) {
+					File outputFile = getTempFile();
+					dfos = new DeferredFileOutputStream(sizeThreshold,
+							outputFile);
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile.delete();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getTempFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile.delete();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        int current = COUNTER.getAndIncrement();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.isFormField = isFormField;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,16 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (tempFile == null) {
+					File tempDir = repository;
+					if (tempDir == null) {
+						tempDir = new File(System.getProperty("java.io.tmpdir"));
+					}
+					String tempFileName = format("upload_%s_%s.tmp", UID,
+							getUniqueId());
+					tempFile = new File(tempDir, tempFileName);
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File outputFile = dfos.getFile();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = getTempFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = get();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        in.defaultReadObject();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 4
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = dfos.getData();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            String charset = getCharSet();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getTempFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getTempFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = get();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            String charset = getCharSet();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (cachedContent == null) {
+					cachedContent = dfos.getData();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (cachedContent == null) {
+					cachedContent = dfos.getData();
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = dfos.getData();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        int current = COUNTER.getAndIncrement();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getStoreLocation();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        String charset = getCharSet();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        byte[] rawdata = get();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = dfos.getData();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,13 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = getTempFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,12 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (dfos.isInMemory()) {
+			cachedContent = get();
+		} else {
+			cachedContent = null;
+			dfosFile = dfos.getFile();
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        cachedContent = get();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            ParameterParser parser = new ParameterParser();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        byte[] rawdata = get();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = dfos.getData();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,10 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        InputStream fis = null;

-        OutputStream output = getOutputStream();
+        ParameterParser parser = new ParameterParser();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.isFormField = isFormField;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            ParameterParser parser = new ParameterParser();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile.delete();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            tempDir = new File(System.getProperty("java.io.tmpdir"));
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        this.isFormField = isFormField;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return repository;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				return null;
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.isFormField = isFormField;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        int current = COUNTER.getAndIncrement();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        dfosFile = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,11 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				File outputFile = getTempFile();
+				dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = get();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,11 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				File outputFile = getTempFile();
+				dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        InputStream fis = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getTempFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File outputFile = getTempFile();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,12 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (dfos.isInMemory()) {
+			cachedContent = get();
+		} else {
+			cachedContent = null;
+			dfosFile = dfos.getFile();
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        final int limit = 100000000;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File tempDir = repository;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            DiskFileItem result = new DiskFileItem(fieldName, contentType,
+					isFormField, fileName, sizeThreshold, repository);
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        int current = COUNTER.getAndIncrement();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = dfos.getData();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getTempFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        ParameterParser parser = new ParameterParser();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,16 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (tempFile == null) {
+					File tempDir = repository;
+					if (tempDir == null) {
+						tempDir = new File(System.getProperty("java.io.tmpdir"));
+					}
+					String tempFileName = format("upload_%s_%s.tmp", UID,
+							getUniqueId());
+					tempFile = new File(tempDir, tempFileName);
+				}
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.fieldName = fieldName;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        this.isFormField = isFormField;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        this.isFormField = isFormField;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,14 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (tempFile == null) {
+			File tempDir = repository;
+			if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
+			String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
+			tempFile = new File(tempDir, tempFileName);
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
java.io.IOException: Stream closed
	at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:170)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:336)
	at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)
	at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)
	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)
	at java.io.InputStreamReader.read(InputStreamReader.java:184)
	at java.io.BufferedReader.fill(BufferedReader.java:161)
	at java.io.BufferedReader.readLine(BufferedReader.java:324)
	at java.io.BufferedReader.readLine(BufferedReader.java:389)
	at us.msu.cse.repair.core.util.StreamReaderThread.run(StreamReaderThread.java:36)
java.lang.IllegalStateException: Exception Occurred
	at us.msu.cse.repair.core.testexecutors.RExternalTestExecutor.runShell(RExternalTestExecutor.java:108)
	at us.msu.cse.repair.core.testexecutors.RExternalTestExecutor.runTests(RExternalTestExecutor.java:44)
	at us.msu.cse.repair.ec.problems.GenProgProblem.invokeTestExecutor(GenProgProblem.java:144)
	at us.msu.cse.repair.ec.problems.GenProgProblem.evaluate(GenProgProblem.java:99)
	at us.msu.cse.repair.ec.algorithms.RSRepairRandomSearch.execute(RSRepairRandomSearch.java:34)
	at us.msu.cse.repair.core.AbstractRepairAlgorithm.execute(AbstractRepairAlgorithm.java:18)
	at us.msu.cse.repair.RSRepairMain.main(RSRepairMain.java:44)
	at us.msu.cse.repair.Main.main(Main.java:12)
java.lang.NullPointerException
	at us.msu.cse.repair.core.testexecutors.RExternalTestExecutor.runTests(RExternalTestExecutor.java:85)
	at us.msu.cse.repair.ec.problems.GenProgProblem.invokeTestExecutor(GenProgProblem.java:144)
	at us.msu.cse.repair.ec.problems.GenProgProblem.evaluate(GenProgProblem.java:99)
	at us.msu.cse.repair.ec.algorithms.RSRepairRandomSearch.execute(RSRepairRandomSearch.java:34)
	at us.msu.cse.repair.core.AbstractRepairAlgorithm.execute(AbstractRepairAlgorithm.java:18)
	at us.msu.cse.repair.RSRepairMain.main(RSRepairMain.java:44)
	at us.msu.cse.repair.Main.main(Main.java:12)
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+						isFormField, fileName, sizeThreshold, repository);
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = dfos.getData();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.isFormField = isFormField;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        final int limit = 100000000;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            DiskFileItem result = new DiskFileItem(fieldName, contentType,
+					isFormField, fileName, sizeThreshold, repository);
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File tempDir = repository;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File outputFile = getTempFile();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File tempDir = repository;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+						isFormField, fileName, sizeThreshold, repository);
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getTempFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = get();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = get();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File outputFile = getTempFile();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        ParameterParser parser = new ParameterParser();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        this.isFormField = isFormField;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = dfos.getFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 5
Fitness: 7.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        String tempFileName = format("upload_%s_%s.tmp", UID,
+						getUniqueId());
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        InputStream fis = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = dfos.getData();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getStoreLocation();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = dfos.getFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            ParameterParser parser = new ParameterParser();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
@@ -653,8 +654,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = dfos.getFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        int current = COUNTER.getAndIncrement();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
@@ -653,9 +651,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            tempDir = new File(System.getProperty("java.io.tmpdir"));
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            InputStream fis = null;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getStoreLocation();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        byte[] fileData = new byte[(int) getSize()];
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.fieldName = fieldName;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (cachedContent == null) {
+				cachedContent = dfos.getData();
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        cachedContent = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,10 +653,16 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        if (dfos == null) {
+					File outputFile = getTempFile();
+					dfos = new DeferredFileOutputStream(sizeThreshold,
+							outputFile);
+				}
+		// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = null;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+				isFormField, fileName, sizeThreshold, repository);

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getTempFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        this.fieldName = fieldName;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile = dfos.getFile();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+						isFormField, fileName, sizeThreshold, repository);
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        InputStream fis = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        this.fieldName = fieldName;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.fieldName = fieldName;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile = dfos.getFile();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				File outputFile = getTempFile();
+				dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile.delete();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				return null;
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = dfos.getData();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.isFormField = isFormField;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = get();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,14 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (tempFile == null) {
+			File tempDir = repository;
+			if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
+			String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
+			tempFile = new File(tempDir, tempFileName);
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				return null;
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            String charset = getCharSet();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            InputStream fis = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = get();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
@@ -653,9 +651,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getStoreLocation();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+				isFormField, fileName, sizeThreshold, repository);

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        int current = COUNTER.getAndIncrement();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.fieldName = fieldName;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,10 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (dfos == null) {
+			File outputFile = getTempFile();
+			dfos = new DeferredFileOutputStream(sizeThreshold, outputFile);
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getStoreLocation();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = get();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        this.isFormField = isFormField;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        byte[] fileData = new byte[(int) getSize()];

OutputStream output = getOutputStream();
if (cachedContent != null) {
java.io.IOException: Stream closed
	at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:170)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:336)
	at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)
	at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)
	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)
	at java.io.InputStreamReader.read(InputStreamReader.java:184)
	at java.io.BufferedReader.fill(BufferedReader.java:161)
	at java.io.BufferedReader.readLine(BufferedReader.java:324)
	at java.io.BufferedReader.readLine(BufferedReader.java:389)
	at us.msu.cse.repair.core.util.StreamReaderThread.run(StreamReaderThread.java:36)
java.lang.IllegalStateException: Exception Occurred
	at us.msu.cse.repair.core.testexecutors.RExternalTestExecutor.runShell(RExternalTestExecutor.java:108)
	at us.msu.cse.repair.core.testexecutors.RExternalTestExecutor.runTests(RExternalTestExecutor.java:64)
	at us.msu.cse.repair.ec.problems.GenProgProblem.invokeTestExecutor(GenProgProblem.java:144)
	at us.msu.cse.repair.ec.problems.GenProgProblem.evaluate(GenProgProblem.java:99)
	at us.msu.cse.repair.ec.algorithms.RSRepairRandomSearch.execute(RSRepairRandomSearch.java:34)
	at us.msu.cse.repair.core.AbstractRepairAlgorithm.execute(AbstractRepairAlgorithm.java:18)
	at us.msu.cse.repair.RSRepairMain.main(RSRepairMain.java:44)
	at us.msu.cse.repair.Main.main(Main.java:12)
java.lang.NullPointerException
	at us.msu.cse.repair.core.testexecutors.RExternalTestExecutor.runTests(RExternalTestExecutor.java:85)
	at us.msu.cse.repair.ec.problems.GenProgProblem.invokeTestExecutor(GenProgProblem.java:144)
	at us.msu.cse.repair.ec.problems.GenProgProblem.evaluate(GenProgProblem.java:99)
	at us.msu.cse.repair.ec.algorithms.RSRepairRandomSearch.execute(RSRepairRandomSearch.java:34)
	at us.msu.cse.repair.core.AbstractRepairAlgorithm.execute(AbstractRepairAlgorithm.java:18)
	at us.msu.cse.repair.RSRepairMain.main(RSRepairMain.java:44)
	at us.msu.cse.repair.Main.main(Main.java:12)
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] fileData = new byte[(int) getSize()];
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getTempFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        this.fieldName = fieldName;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = dfos.getFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            String charset = getCharSet();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = dfos.getData();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File outputFile = getStoreLocation();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        dfosFile.delete();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        cachedContent = get();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        this.fieldName = fieldName;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        final int limit = 100000000;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = getStoreLocation();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = dfos.getFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            String charset = getCharSet();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = dfos.getFile();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (cachedContent == null) {
+				cachedContent = dfos.getData();
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        cachedContent = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.fieldName = fieldName;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        cachedContent = get();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        ParameterParser parser = new ParameterParser();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            String charset = getCharSet();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				return null;
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        ParameterParser parser = new ParameterParser();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = dfos.getFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        InputStream fis = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        File outputFile = dfos.getFile();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+				isFormField, fileName, sizeThreshold, repository);

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getTempFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = dfos.getData();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        InputStream fis = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            InputStream fis = null;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.isFormField = isFormField;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File tempDir = repository;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        byte[] rawdata = get();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = null;
}
return tempFile;
}
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        this.isFormField = isFormField;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            tempDir = new File(System.getProperty("java.io.tmpdir"));
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile.delete();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,9 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        DiskFileItem result = new DiskFileItem(fieldName, contentType,
+				isFormField, fileName, sizeThreshold, repository);
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.fieldName = fieldName;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = get();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
@@ -656,7 +654,10 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
@@ -653,8 +651,12 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (dfos.isInMemory()) {
+			cachedContent = get();
+		} else {
+			cachedContent = null;
+			dfosFile = dfos.getFile();
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 10
Fitness: 12.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = getTempFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        this.fieldName = fieldName;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        byte[] rawdata = get();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        String charset = getCharSet();
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = dfos.getFile();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        byte[] fileData = new byte[(int) getSize()];

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        in.defaultReadObject();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 4
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File tempDir = repository;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            return tempFile;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            cachedContent = get();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        in.defaultReadObject();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 4
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        InputStream fis = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File tempDir = repository;
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            final int limit = 100000000;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,15 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (tempFile == null) {
+			File tempDir = repository;
+			if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
+			String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
+			tempFile = new File(tempDir, tempFileName);
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        byte[] rawdata = get();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            tempDir = new File(System.getProperty("java.io.tmpdir"));
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        dfosFile = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            int current = COUNTER.getAndIncrement();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        byte[] rawdata = get();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,12 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        this.fieldName = fieldName;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        in.defaultReadObject();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 4
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,13 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos.isInMemory()) {
+				cachedContent = get();
+			} else {
+				cachedContent = null;
+				dfosFile = dfos.getFile();
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        cachedContent = dfos.getData();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        final int limit = 100000000;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.isFormField = isFormField;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.fieldName = fieldName;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            this.fieldName = fieldName;
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,7 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile.delete();
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,9 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (dfos == null) {
+				return null;
+			}
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            File outputFile = dfos.getFile();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,9 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        if (cachedContent == null) {
+			cachedContent = dfos.getData();
+		}

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        cachedContent = dfos.getData();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        String charset = getCharSet();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,8 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        File outputFile = getStoreLocation();
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        final int limit = 100000000;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        dfosFile = null;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,10 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -656,7 +656,15 @@ public class DiskFileItem
// read values
in.defaultReadObject();

-        OutputStream output = getOutputStream();
+        if (tempFile == null) {
+			File tempDir = repository;
+			if (tempDir == null) {
+				tempDir = new File(System.getProperty("java.io.tmpdir"));
+			}
+			String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
+			tempFile = new File(tempDir, tempFileName);
+		}
+		OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
} else {
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        final int limit = 100000000;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,7 +653,8 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
+        File tempDir = repository;
+		// read values
in.defaultReadObject();

OutputStream output = getOutputStream();
Number of failed tests: 2
Fitness: 4.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        ParameterParser parser = new ParameterParser();

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            byte[] rawdata = get();
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 23
Fitness: 25.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -584,7 +584,8 @@ public class DiskFileItem

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

-            tempFile = new File(tempDir, tempFileName);
+            dfosFile = null;
+			tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 3
Fitness: 5.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,9 +653,6 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
-
OutputStream output = getOutputStream();
if (cachedContent != null) {
output.write(cachedContent);
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -653,8 +653,7 @@ public class DiskFileItem
*/
private void readObject(ObjectInputStream in)
throws IOException, ClassNotFoundException {
-        // read values
-        in.defaultReadObject();
+        dfosFile = null;

OutputStream output = getOutputStream();
if (cachedContent != null) {
Number of failed tests: 6
Fitness: 8.0
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
Compilation fails!
One fitness evaluation is finished...
One fitness evaluation starts...
----------------------------------
Patch Candidate:
@@ -583,8 +583,6 @@ public class DiskFileItem
}

String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());
-
-            tempFile = new File(tempDir, tempFileName);
}
return tempFile;
}
Number of failed tests: 7
Fitness: 9.0
One fitness evaluation is finished...


Node: 158fac6bc2aa



Date: Tue Oct 11 18:37:57 EDT 2022

