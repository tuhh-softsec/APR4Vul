cd /workdir/TBar_vul4j_spring-projects_spring-security_VUL4J-73;
export JAVA_TOOL_OPTIONS="-Dfile.encoding=UTF8 -Duser.language=en-US -Duser.country=US -Duser.language=en";
TZ="America/New_York"; export TZ;
export PATH="/usr/lib/jvm/java-8-openjdk-amd64/bin:$PATH";
export JAVA_HOME="/usr/lib/jvm/java-8-openjdk-amd64";
timeout 240m java -Xmx4g -Xms1g -XX:MaxPermSize=512m \
    -cp /script/../libs/tbar_external/com.gzoltar-0.1.1-jdk7.jar:/script/../repair_tools/tbar.jar edu.lu.uni.serval.tbar.main.Main \
    "/workdir/TBar_vul4j_spring-projects_spring-security_VUL4J-73" "org.springframework.security.authentication.encoding.PlaintextPasswordEncoderTests#testNull" "/core/src/main/java/" "/core/src/test/java/" "/core/build/classes/main/" "/core/build/classes/test/" "/script/../data/benchmarks/vul4j/perfectfl/VUL4J-73/spectra.txt" "./gradlew :spring-security-core:test --tests org.springframework.security.authentication.encoding.PlaintextPasswordEncoderTests.testNull" "./gradlew :spring-security-core:test" "/workdir/TBar_vul4j_spring-projects_spring-security_VUL4J-73/core/build/classes/test:/workdir/TBar_vul4j_spring-projects_spring-security_VUL4J-73/core/build/resources/test:/workdir/TBar_vul4j_spring-projects_spring-security_VUL4J-73/core/build/classes/main:/workdir/TBar_vul4j_spring-projects_spring-security_VUL4J-73/core/build/resources/main:/root/.gradle/caches/modules-2/files-2.1/org.springframework/spring-core/4.3.23.RELEASE/1481429d44ea0deca1d8b9d6d5e948cb7f063bdb/spring-core-4.3.23.RELEASE.jar:/root/.gradle/caches/modules-2/files-2.1/aopalliance/aopalliance/1.0/235ba8b489512805ac13a8f9ea77a1ca5ebe3e8/aopalliance-1.0.jar:/root/.gradle/caches/modules-2/files-2.1/org.springframework/spring-aop/4.3.23.RELEASE/f49489bf0774db690f85588cab86d943069704bd/spring-aop-4.3.23.RELEASE.jar:/root/.gradle/caches/modules-2/files-2.1/org.springframework/spring-beans/4.3.23.RELEASE/27570e1d493f636c910191004f822e756a9df871/spring-beans-4.3.23.RELEASE.jar:/root/.gradle/caches/modules-2/files-2.1/org.springframework/spring-context/4.3.23.RELEASE/337d1030cb7abeeb28618b01dab7250a90d77151/spring-context-4.3.23.RELEASE.jar:/root/.gradle/caches/modules-2/files-2.1/org.springframework/spring-expression/4.3.23.RELEASE/cebdf400b3c820220deb868a84bce627eb8ad18c/spring-expression-4.3.23.RELEASE.jar:/workdir/TBar_vul4j_spring-projects_spring-security_VUL4J-73/crypto/build/libs/spring-security-crypto-4.2.13.BUILD-SNAPSHOT.jar:/root/.gradle/caches/modules-2/files-2.1/net.sf.ehcache/ehcache/2.10.6/38076997b10f5c762a210ea8b9f6099da35ac5f/ehcache-2.10.6.jar:/root/.gradle/caches/modules-2/files-2.1/javax.annotation/jsr250-api/1.0/5025422767732a1ab45d93abfea846513d742dcf/jsr250-api-1.0.jar:/root/.gradle/caches/modules-2/files-2.1/org.aspectj/aspectjrt/1.8.14/65af551c0487609d48b91ea401de61f72bb91a09/aspectjrt-1.8.14.jar:/root/.gradle/caches/modules-2/files-2.1/org.springframework/spring-jdbc/4.3.23.RELEASE/61baab23c8938b96cb5f355dbf85359241d7b69e/spring-jdbc-4.3.23.RELEASE.jar:/root/.gradle/caches/modules-2/files-2.1/org.springframework/spring-tx/4.3.23.RELEASE/2a2d4a24b161f0fdd14816a715a760d2fa1f357b/spring-tx-4.3.23.RELEASE.jar:/root/.gradle/caches/modules-2/files-2.1/com.fasterxml.jackson.core/jackson-databind/2.8.11.3/844df5aba5a1a56e00905b165b12bb34116ee858/jackson-databind-2.8.11.3.jar:/root/.gradle/caches/modules-2/files-2.1/junit/junit/4.12/2973d150c0dc1fefe998f834810d68f278ea58ec/junit-4.12.jar:/root/.gradle/caches/modules-2/files-2.1/org.mockito/mockito-core/1.10.19/e8546f5bef4e061d8dd73895b4e8f40e3fe6effe/mockito-core-1.10.19.jar:/root/.gradle/caches/modules-2/files-2.1/org.springframework/spring-test/4.3.23.RELEASE/fb5a41e62dc86ca11f666691e13ea0b5573f20b4/spring-test-4.3.23.RELEASE.jar:/root/.gradle/caches/modules-2/files-2.1/org.assertj/assertj-core/2.2.0/edd59795b236afc790dd161e7e3677757b06f2e7/assertj-core-2.2.0.jar:/root/.gradle/caches/modules-2/files-2.1/commons-collections/commons-collections/3.2.2/8ad72fe39fa8c91eaaf12aadb21e0c3661fe26d5/commons-collections-3.2.2.jar:/root/.gradle/caches/modules-2/files-2.1/org.slf4j/jcl-over-slf4j/1.7.25/f8c32b13ff142a513eeb5b6330b1588dcb2c0461/jcl-over-slf4j-1.7.25.jar:/root/.gradle/caches/modules-2/files-2.1/org.powermock/powermock-core/1.6.5/5c7f30af24a260b9a452c194be0cca373db9aaf6/powermock-core-1.6.5.jar:/root/.gradle/caches/modules-2/files-2.1/org.powermock/powermock-api-support/1.6.5/9b0cdf26351d3608a1bf11d3a5b8c96e9c32605/powermock-api-support-1.6.5.jar:/root/.gradle/caches/modules-2/files-2.1/org.powermock/powermock-module-junit4-common/1.6.5/ef0b8507142b3c176d1b8a1937a8490eaf8babe9/powermock-module-junit4-common-1.6.5.jar:/root/.gradle/caches/modules-2/files-2.1/org.powermock/powermock-module-junit4/1.6.5/e6ad8d4fddb3cc1e11ebf343ecc82ea10b12d5a4/powermock-module-junit4-1.6.5.jar:/root/.gradle/caches/modules-2/files-2.1/org.powermock/powermock-api-mockito/1.6.5/7f5cf8f0ddb3539b28581431bbeda4d81ff5ef02/powermock-api-mockito-1.6.5.jar:/root/.gradle/caches/modules-2/files-2.1/org.powermock/powermock-reflect/1.6.5/3569903763e7741965acc9627ad8253d210feedf/powermock-reflect-1.6.5.jar:/root/.gradle/caches/modules-2/files-2.1/org.skyscreamer/jsonassert/1.4.0/9cdbb373a06f6513e51e8c545ee6a5e981463edb/jsonassert-1.4.0.jar:/root/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.1.11/ccedfbacef4a6515d2983e3f89ed753d5d4fb665/logback-classic-1.1.11.jar:/root/.gradle/caches/modules-2/files-2.1/org.hsqldb/hsqldb/2.3.6/d4adfef3f017dd71fe789067cc6b7c39f31f2a3a/hsqldb-2.3.6.jar:/root/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/1.7.25/da76ca59f6a57ee3102f8f9bd9cee742973efa8a/slf4j-api-1.7.25.jar:/root/.gradle/caches/modules-2/files-2.1/com.fasterxml.jackson.core/jackson-annotations/2.8.0/45b426f7796b741035581a176744d91090e2e6fb/jackson-annotations-2.8.0.jar:/root/.gradle/caches/modules-2/files-2.1/com.fasterxml.jackson.core/jackson-core/2.8.10/eb21a035c66ad307e66ec8fce37f5d50fd62d039/jackson-core-2.8.10.jar:/root/.gradle/caches/modules-2/files-2.1/org.hamcrest/hamcrest-core/1.3/42a25dc3219429f0e5d060061f71acb49bf010a0/hamcrest-core-1.3.jar:/root/.gradle/caches/modules-2/files-2.1/org.javassist/javassist/3.20.0-GA/a9cbcdfb7e9f86fbc74d3afae65f2248bfbf82a0/javassist-3.20.0-GA.jar:/root/.gradle/caches/modules-2/files-2.1/org.powermock/powermock-api-mockito-common/1.6.5/50929570ea185735f8f038ea650a60f6444e7ec3/powermock-api-mockito-common-1.6.5.jar:/root/.gradle/caches/modules-2/files-2.1/com.vaadin.external.google/android-json/0.0.20131108.vaadin1/fa26d351fe62a6a17f5cda1287c1c6110dec413f/android-json-0.0.20131108.vaadin1.jar:/root/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-core/1.1.11/88b8df40340eed549fb07e2613879bf6b006704d/logback-core-1.1.11.jar:/root/.gradle/caches/modules-2/files-2.1/org.objenesis/objenesis/2.2/3fb533efdaa50a768c394aa4624144cf8df17845/objenesis-2.2.jar";
echo "\n\nNode: `hostname`\n";
echo "\n\nDate: `date`\n";
Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8 -Duser.language=en-US -Duser.country=US -Duser.language=en
OpenJDK 64-Bit Server VM warning: ignoring option MaxPermSize=512m; support was removed in 8.0
18:45:42,580 |-INFO in ch.qos.logback.classic.LoggerContext[TBar] - Could NOT find resource [logback-test.xml]
18:45:42,580 |-INFO in ch.qos.logback.classic.LoggerContext[TBar] - Could NOT find resource [logback.groovy]
18:45:42,580 |-INFO in ch.qos.logback.classic.LoggerContext[TBar] - Found resource [logback.xml] at [jar:file:/repair_tools/tbar.jar!/logback.xml]
18:45:42,590 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@5a42bbf4 - URL [jar:file:/repair_tools/tbar.jar!/logback.xml] is not of type file
18:45:42,633 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
18:45:42,634 |-INFO in ch.qos.logback.classic.joran.action.ContextNameAction - Setting logger context name as [TBar]
18:45:42,634 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
18:45:42,637 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
18:45:42,689 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.hibernate.engine.query.HQLQueryPlan] to DEBUG
18:45:42,689 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting additivity of logger [org.hibernate.engine.query.HQLQueryPlan] to false
18:45:42,689 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.piedra.logback] to DEBUG
18:45:42,689 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - Could not find an appender named [FILE]. Did you define it below instead of above in the configuration file?
18:45:42,689 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - See http://logback.qos.ch/codes.html#appender_order for more details.
18:45:42,689 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to DEBUG
18:45:42,689 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
18:45:42,690 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - Could not find an appender named [ROLLINGFILE]. Did you define it below instead of above in the configuration file?
18:45:42,690 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - See http://logback.qos.ch/codes.html#appender_order for more details.
18:45:42,690 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
18:45:42,701 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@270421f5 - Registering current configuration as safe fallback point

2022-09-14 18:45:42.961 [main] INFO  edu.lu.uni.serval.tbar.AbstractFixer - TBar_vul4j_spring-projects_spring-security_VUL4J-73 Failed Tests: 1
2022-09-14 18:45:42.964 [main] INFO  edu.lu.uni.serval.tbar.TBarFixer - =======StaticBugFixer: Start to fix suspicious code======
2022-09-14 18:45:42.964 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - org.springframework.security.authentication.encoding.PlaintextPasswordEncoder ===54
2022-09-14 18:45:43.305 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Suspicious Code: 
String pass1 = encPass + "";
2022-09-14 18:45:45.485 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Patch Candidate:
@@ -51,7 +51,7 @@ public class PlaintextPasswordEncoder extends BasePasswordEncoder {
-		String pass1 = encPass + "";
+		String pass1 = rawPass + "";
2022-09-14 18:45:45.485 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Compiling
2022-09-14 18:45:46.110 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Test previously failed test cases.
2022-09-14 18:46:43.324 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Patch Candidate:
@@ -51,7 +51,7 @@ public class PlaintextPasswordEncoder extends BasePasswordEncoder {
-		String pass1 = encPass + "";
+		String pass1 = pass1 + "";
2022-09-14 18:46:43.325 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Compiling
2022-09-14 18:46:44.080 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - BuggyProject ---Fixer: fix fail because of failed compiling! 
2022-09-14 18:46:44.097 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Patch Candidate:
@@ -51,7 +51,7 @@ public class PlaintextPasswordEncoder extends BasePasswordEncoder {
-		String pass1 = encPass + "";
+		String pass1 = isIgnorePasswordCase() + "";
2022-09-14 18:46:44.097 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Compiling
2022-09-14 18:46:44.679 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Test previously failed test cases.
2022-09-14 18:47:41.134 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Test the whole test suite.
2022-09-14 18:48:46.030 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Patch Candidate:
@@ -51,7 +51,8 @@ public class PlaintextPasswordEncoder extends BasePasswordEncoder {
-		String pass1 = encPass + "";
+		if (encPass != null) {
+	String pass1 = encPass + "";
@@ -67,6 +68,8 @@ public class PlaintextPasswordEncoder extends BasePasswordEncoder {
+	}
+
2022-09-14 18:48:46.031 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Compiling
2022-09-14 18:48:46.641 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - BuggyProject ---Fixer: fix fail because of failed compiling! 
2022-09-14 18:48:46.660 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Patch Candidate:
@@ -51,7 +51,10 @@ public class PlaintextPasswordEncoder extends BasePasswordEncoder {
-		String pass1 = encPass + "";
+		if (encPass == null) {
+	    throw new IllegalArgumentException("Null 'encPass' argument.");
+	}
+String pass1 = encPass + "";
2022-09-14 18:48:46.660 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Compiling
2022-09-14 18:48:47.316 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Test previously failed test cases.
2022-09-14 18:49:44.282 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Patch Candidate:
@@ -51,7 +51,10 @@ public class PlaintextPasswordEncoder extends BasePasswordEncoder {
-		String pass1 = encPass + "";
+		if (encPass == null) {
+	    return false;
+	}
+String pass1 = encPass + "";
2022-09-14 18:49:44.283 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Compiling
2022-09-14 18:49:44.948 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Test previously failed test cases.
2022-09-14 18:50:42.196 [main] DEBUG edu.lu.uni.serval.tbar.AbstractFixer - Test the whole test suite.
2022-09-14 18:51:46.852 [main] INFO  edu.lu.uni.serval.tbar.AbstractFixer - Succeeded to fix the bug BuggyProject====================
diff --git a/core/src/main/java/org/springframework/security/authentication/encoding/PlaintextPasswordEncoder.java b/core/src/main/java/org/springframework/security/authentication/encoding/PlaintextPasswordEncoder.java
index b1e546a138e6..ee3aae0a8f01 100644
--- a/core/src/main/java/org/springframework/security/authentication/encoding/PlaintextPasswordEncoder.java
+++ b/core/src/main/java/org/springframework/security/authentication/encoding/PlaintextPasswordEncoder.java
@@ -51,7 +51,10 @@ public class PlaintextPasswordEncoder extends BasePasswordEncoder {
 	}
 
 	public boolean isPasswordValid(String encPass, String rawPass, Object salt) {
-		String pass1 = encPass + "";
+		if (encPass == null) {
+	    return false;
+	}
+String pass1 = encPass + "";
 
 		// Strict delimiters is false because pass2 never persisted anywhere
 		// and we want to avoid unnecessary exceptions as a result (the
2022-09-14 18:51:46.868 [main] INFO  edu.lu.uni.serval.tbar.TBarFixer - =======StaticBugFixer: Finish off fixing======
Succeeded to fix bug


Node: ee2bf67284b9



Date: Wed Sep 14 18:51:46 EDT 2022

